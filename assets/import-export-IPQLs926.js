import{v as k,r as u,n as e}from"./components-CI4-KR-R.js";import{A as N}from"./AppLayout-CnIXLKMR.js";import{u as v}from"./formStore-B0pwvZwb.js";import"./clsx-B-dksMZM.js";const A=()=>[{title:"Import/Export Forms - Form Builder"},{name:"description",content:"Import and export your forms as JSON files"}];function O(){k();const{forms:o,importForms:g}=v(),[h,d]=u.useState(null),[f,m]=u.useState(null),x=u.useRef(null),b=()=>{if(o.length===0)return;const t=JSON.stringify(o,null,2),a=`data:application/json;charset=utf-8,${encodeURIComponent(t)}`,l=`form-builder-export-${new Date().toISOString().slice(0,10)}.json`,s=document.createElement("a");s.setAttribute("href",a),s.setAttribute("download",l),s.click()},y=t=>{const a=o.find(i=>i.id===t);if(!a)return;const l=JSON.stringify(a,null,2),s=`data:application/json;charset=utf-8,${encodeURIComponent(l)}`,p=`form-${a.title||"untitled"}-${new Date().toISOString().slice(0,10)}.json`,n=document.createElement("a");n.setAttribute("href",s),n.setAttribute("download",p),n.click()},j=t=>{var s;d(null),m(null);const a=(s=t.target.files)==null?void 0:s[0];if(!a)return;const l=new FileReader;l.onload=p=>{var n;try{const i=(n=p.target)==null?void 0:n.result,r=JSON.parse(i);if(Array.isArray(r)){if(!r.every(c=>c&&typeof c=="object"&&"id"in c&&"title"in c&&"steps"in c)){d("Invalid form data format in the imported file.");return}g(r),m(`Successfully imported ${r.length} form${r.length!==1?"s":""}.`)}else r&&typeof r=="object"&&"id"in r&&"title"in r&&"steps"in r?(g([r]),m(`Successfully imported form: ${r.title||"Untitled"}.`)):d("Invalid form data format in the imported file.")}catch(i){d("Failed to parse the imported file. Please ensure it's a valid JSON file."),console.error("Import error:",i)}x.current&&(x.current.value="")},l.onerror=()=>{d("An error occurred while reading the file.")},l.readAsText(a)};return e.jsx(N,{children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Import & Export Forms"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Export Forms"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Export your forms as JSON files to back them up or transfer them to another device."}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:b,disabled:o.length===0,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed mb-4",children:["Export All Forms (",o.length,")"]}),o.length===0?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center",children:"You don't have any forms to export yet."}):e.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:o.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 truncate flex-1",children:t.title||"Untitled Form"}),e.jsx("button",{onClick:()=>y(t.id),className:"ml-2 px-3 py-1 text-xs bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",children:"Export"})]},t.id))})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Import Forms"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Import forms from JSON files that were previously exported."}),e.jsx("div",{className:"mb-6",children:e.jsxs("label",{htmlFor:"file-upload",className:"w-full flex items-center justify-center px-4 py-6 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-md cursor-pointer hover:border-gray-400 dark:hover:border-gray-500 transition-colors",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Click to select a file or drag and drop"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-500",children:"JSON files only"})]}),e.jsx("input",{id:"file-upload",name:"file-upload",type:"file",accept:".json,application/json",className:"sr-only",onChange:j,ref:x})]})}),h&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md mb-4",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:h})}),f&&e.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md",children:e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:f})})]})]})]})})}export{O as default,A as meta};
